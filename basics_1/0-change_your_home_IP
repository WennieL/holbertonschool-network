#!/usr/bin/env bash
# a Bash script that configures an Ubuntu server with the below requirements.

# Requirements:

# localhost resolves to 127.0.0.2
# facebook.com resolves to 8.8.8.8.
# Backup the original /etc/hosts file
# Check if the script is run as root
if [[ $EUID -ne 0 ]]; then
   echo "This script must be run as root. Please use sudo." 
   exit 1
fi

# Backup the original /etc/hosts file
cp /etc/hosts /etc/hosts.bak

# Update localhost to resolve to 127.0.0.2
sed -i '/127.0.0.1\s*localhost/c\127.0.0.2 localhost' /etc/hosts

# Add facebook.com to resolve to 8.8.8.8 if not already present
if ! grep -q '8.8.8.8 facebook.com' /etc/hosts; then
    echo '8.8.8.8 facebook.com' >> /etc/hosts
fi

echo "Configuration updated. Localhost now resolves to 127.0.0.2 and facebook.com resolves to 8.8.8.8."

# Optional: Display the updated /etc/hosts file
cat /etc/hosts